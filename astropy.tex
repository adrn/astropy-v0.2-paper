\documentclass[traditabstract]{aa}

\usepackage{xspace}
\usepackage{natbib}
\usepackage{url}
\bibpunct{(}{)}{;}{a}{}{,}

\newcommand{\astropy}{\texttt{astropy}\xspace}

\begin{document}

\titlerunning{Astropy}
\authorrunning{The Astropy Collaboration}

\title{Astropy: A Community Python Package for Astronomy}

% The author list is not final, and the order of authors may still change.
% Additional authors may be added based on non-commit-based contributions to
% the project.

% Please wrap text to 78 characters.

% I have indicated authors who have acknowledged authorsip by '%confirmed' next
% to their name.

\author{
The Astropy Collaboration
  \and
% Coordination committee
Erik Tollerud\inst{\ref{inst:irvine}}  % confirmed
  \and
Thomas P. Robitaille\inst{\ref{inst:mpia}}  % confirmed
  \and
Perry Greenfield\inst{\ref{inst:stsci}}  % confirmed
  \and
% Developers (other than coordination committee).
Michael Droettboom\inst{\ref{inst:stsci}}  % confirmed
  \and
Tom Aldcroft\inst{\ref{inst:cfa}}  % confirmed
  \and
Erik Bray\inst{\ref{inst:stsci}}
  \and
Matt Davis\inst{\ref{inst:stsci}}  % confirmed
  \and
Adam Ginsburg\inst{\ref{inst:colorado}}  % confirmed
  \and
Adrian M. Price-Whelan\inst{\ref{inst:columbia}}  % confirmed
  \and
Wolfgang Kerzendorf\inst{\ref{inst:toronto}}
  \and
Alexander Conley\inst{\ref{inst:colorado}}
  \and
Neil Crighton\inst{\ref{inst:mpia}}  % confirmed
  \and
Kyle Barbary\inst{\ref{inst:argonne}}  % confirmed
  \and
Demitri Muna\inst{\ref{inst:nyu}}  % confirmed
  \and
Henry Ferguson\inst{\ref{inst:stsci}}
  \and
Frederic Grollier
  \and
Prasanth H. Nair\inst{\ref{inst:freelance}}  % confirmed
  \and
Hans M. G\"unther\inst{\ref{inst:cfa}}  % confirmed
  \and
Christoph Deil\inst{\ref{inst:mpik}}  % confirmed
  \and
Simon Conseil\inst{\ref{inst:oamp}}
  \and
Julien Woillez
  \and
Roban Kramer  % confirmed
  \and
James Turner\inst{\ref{inst:gemini_s}}  % confirmed
  \and
Leo Singer\inst{\ref{inst:ligo}}  % confirmed
  \and
% Other contributors, alphabetical, including coordination meeting
% participants
K. Azalee Bostroem\inst{\ref{inst:stsci}}  % confirmed
  \and
Doug Burke\inst{\ref{inst:cfa}}  % confirmed
  \and
Andy Casey\inst{\ref{inst:stromlo}}  % confirmed
  \and
Steve Crawford\inst{\ref{inst:saao}}
  \and
Nadia Dencheva\inst{\ref{inst:stsci}}  % confirmed
  \and
Justin Ely\inst{\ref{inst:stsci}}  % confirmed
  \and
Tim Jenness\inst{\ref{inst:jac}}  % confirmed
  \and
Kathleen Labrie\inst{\ref{inst:gemini_n}}  % confirmed
  \and
Pey Lian Lim\inst{\ref{inst:stsci}}  % confirmed
  \and
Francesco Pierfederici\inst{\ref{inst:stsci}}  % confirmed
  \and
Andrew Pontzen\inst{\ref{inst:oxford}}  % confirmed
  \and
Andy Ptak\inst{\ref{inst:gsfc}}  % confirmed
  \and
Brian Refsdal  % confirmed
  \and
Mathieu Servillat\inst{\ref{inst:saclay}}  % confirmed
  \and
Ole Streicher\inst{\ref{inst:leibniz}}  % confirmed
}

\institute{
  Center for Cosmology, Department of Physics and Astronomy, University of California at Irvine, Irvine, CA, 92697, USA
  \label{inst:irvine}
    \and
  Max Planck Institute for Astronomy, K\"onigstuhl 17, Heidelberg 69117, Germany
  \label{inst:mpia}
    \and
  Space Telescope Science Institute, 3700 San Martin Drive, Baltimore, MD 21218
  \label{inst:stsci}
    \and
  Harvard-Smithsonian Center for Astrophysics, 60 Garden Street, Cambridge, MA, 02138, USA
  \label{inst:cfa}
    \and
  Center for Astrophysics and Space Astronomy, University of Colorado, Boulder, CO 80309, USA
  \label{inst:colorado}
    \and
  Department of Astronomy, Columbia University, Pupin Hall, 550W 120th St., New York, NY 10027, USA
  \label{inst:columbia}
    \and
  Department of Astronomy and Astrophysics, University of Toronto, 50 Saint George Street, Toronto, ON M5S3H4, Canada
  \label{inst:toronto}
    \and
  Argonne National Laboratory, High Energy Physics Division, 9700 South Cass Avenue, Argonne, Illinois 60439, USA
  \label{inst:argonne}
    \and
  Center for Cosmology and Particle Physics, New York University, New York, NY 10003, USA
  \label{inst:nyu}
    \and
  Freelance
  \label{inst:freelance}
    \and
  Max-Planck-Institute for Nuclear Physics, P.O. Box 103980, 69029 Heidelberg, Germany
  \label{inst:mpik}
    \and
  Laboratoire d'Astrophysique de Marseille, OAMP, Universit\'e Aix-Marseille et CNRS,
Marseille, France
  \label{inst:oamp}
    \and
  Gemini Observatory, Casilla 603, La Serena, Chile
  \label{inst:gemini_s}
    \and
  LIGO Laboratory, California Institute of Technology, MC 100-36, 1200 E. California Blvd., Pasadena, CA, 91125, USA
  \label{inst:ligo}
    \and
  Research School of Astronomy and Astrophysics, Australian National University, Mount Stromlo Observatory
  \label{inst:stromlo}
    \and
  SAAO, P.O. Box 9, Observatory 7935, Cape Town, South Africa
  \label{inst:saao}
    \and
  Joint Astronomy Centre, 660 North A'ohoku Place, Hilo, HI 96720, USA
  \label{inst:jac}
    \and
  Gemini Observatory, 670 N. A'ohoku Place, Hilo, Hawaii 96720, USA
  \label{inst:gemini_n}
    \and
  Oxford Astrophysics, Denys Wilkinson Building, Keble Road, Oxford OX1 3RH, UK; Balliol College, Broad Street, Oxford OX1 3BJ, UK
  \label{inst:oxford}
    \and
  NASA Goddard Space Flight Center, X-ray Astrophysics Lab Code 662, Greenbelt, MD 20771, USA
  \label{inst:gsfc}
    \and
  Laboratoire AIM (CEA/DSM/IRFU/SAp, CNRS, Universite Paris Diderot), CEA Saclay, Bat. 709, 91191 Gif-sur-Yvette, France
  \label{inst:saclay}
    \and
  Leibniz Institute for Astrophysics Potsdam (AIP)
  \label{inst:leibniz}
}

\abstract{
We present the first public version of the open-source and community-developed
Python package, Astropy. This package aims to provide core astronomy-related
functionality to the community, including for example support for
domain-specific file formats such as Flexible Image Transport System (FITS)
files, Virtual Observatory (VO), and common ASCII table formats, unit and
physical quantity conversions, physical constants specific to astronomy,
celestial coordinate and time transformations, world coordinate system (WCS)
support, generalized containers for representing gridded as well as tabular
data, and a framework for cosmological transformations and conversions.
Significant functionality is under active development, such as a model fitting
framework, VO client and server tools, and aperture and point spread function
(PSF) photometry tools. Participation in development is open to anyone
interested in joining the project.

}

\maketitle

\tableofcontents


\section{Introduction}

% Authors: Tom R., Erik T., Perry G.

The Python programming language\footnote{\url{http://www.astropy.org}} has been
one of the fastest-growing programming languages in the astronomy community in
the last decade. While there have been a number of efforts to develop Python
packages for astronomy-specific functionality, these efforts have been
fragmented, and several dozens of packages have been developed across the
community with little or no coordination, leading to duplication and a lack of
homogeneity across packages. This in turn has made it difficult for users to
get set up with all the required packages needed in an Astronomer's toolkit.
Since a number of these packages depend on individual or small groups of
developers, packages are sometimes no longer maintained, or simply become
unavailable, which is detrimental to long-term research and research
reproducibility.

The Astropy project was started\footnote{Following discussions on
the \texttt{astropy} mailing list at
\url{http://mail.scipy.org/mailman/listinfo/astropy}} in 2011 out of a desire
to bring together developers across the field of astronomy in order to
coordinate efforts to develop a common Python library. The aim of this library
was to cover much of the astronomy-specific functionality needed by
researchers, complementing more general standard scientific packages such as
NumPy \citep{oliphant2006guide,van2011numpy} and SciPy \citep{jones2001scipy},
which are invaluable for numerical array-based calculations, and more general
scientific algorithms (e.g. interpolation, integration, clustering, etc.)
respectively. To date, over 130 people are signed up to the
\textit{development} mailing list for the Astropy project\footnote{
\url{https://groups.google.com/forum/?fromgroups\#!forum/astropy-dev}}.

Most efforts in the Astropy project to date have gone towards developing the
core \astropy package. However, we note the scope of the Astropy project is
not simply to create a core package, but more generally to bring together
authors of existing packages to work together and agree on including a common
set of functionality in the core package (and in some cases deprecating their
packages if all functionality ends up in \astropy), since the aim is
ultimately to simplify the landscape of packages available to users. In
addition, the Astropy project includes more specialized Python packages (which
we call \textit{affiliated} packages) that are not included in the core
package for various reasons: for some the functionality is in early stages of
development and is not robust; or the license is not compatible with Astropy;
the package includes large files; or the functionality is mature, but too
specific to be included in a core package.

In this paper, we present the first public release (v0.2) of the \astropy
package. We provide an overview of the current capabilities
(\S\ref{sec:capabilities}), our development workflow (\S\ref{sec:workflow}),
and planned functionality (\S\ref{sec:future}).


\section{Capabilities}

\label{sec:capabilities}


\subsection{Units, Quantities, and Physical Constants}

% Authors: Perry, Mike, Adrian, Tom R.


\subsection{Time}

% Authors: Tom A.


\subsection{Celestial Coordinates}

% Authors: Erik T., Adrian, Demitri


\subsection{Tables and Gridded data}

% Authors: Tom A., Tom R., Wolfgang K., Erik T.

The \texttt{astropy.table} and \texttt{astropy.nddata} sub-packages contain
classes (\texttt{Table} and \texttt{NDData}) that allow users to represent
astronomical data in the form of tables or n-dimensional gridded datasets,
including meta-data (for example units).

The \texttt{Table} class provides a high-level wrapper to Numpy structured
arrays, which are essentially arrays that have fields (or columns) with
heterogeneous data types, and any number of rows. Numpy structured arrays are
however difficult to manipulate or modify, so the \texttt{Table} class makes
it easy for users to create a table from columns, add/remove columns or rows,
and mask values from the table. In addition, tables can be easily
read/written from/to common file formats using the \texttt{Table.read} and
\texttt{Table.write} methods. In addition to providing easy manipulation and
input/output of table objects, the \texttt{Table} class allows units to be
specified for each column using the \texttt{astropy.units} framework, and
also allows the \texttt{Table} object to contain arbitrary meta-data (stored
in \texttt{Table.meta}).


The \texttt{NDData} class ...

\subsection{File Formats}


\subsubsection{FITS}

% Authors: Erik B.


\subsubsection{ASCII table formats}

% Authors: Tom A.


\subsubsection{Virtual Observatory tables}

% Authors: Mike D.


\subsection{World Coordinate Systems}

% Authors: Mike D.


\subsection{Cosmology}

% Authors: Neil Crighton, Alex Conley

The \texttt{astropy.cosmology} sub-package contains classes for
representing widely used cosmologies, and functions for calculating
quantities that depend on a cosmological model. It also contains a
framework for working with less frequently employed cosmologies that
may be not be flat, or have a time-varying pressure to density ratio,
$w$, for dark energy. The quantities that can be calculated are
generally taken from those described by \citet{Hogg99}. Some examples
are the angular diameter distance, comoving distance, critical
density, distance modulus, lookback time, luminosity distance, and
Hubble parameter as a function of redshift.

The fundamental model for this sub-package is that any given cosmology
is represented by a class. An instance of this class has attributes
giving all the parameters required to uniquely specify the cosmology,
such as the Hubble parameter, CMB temperature and the baryonic, cold
dark matter, and dark energy densities at $z=0$. One can then use
methods of this class to perform calculations using these parameters.

For example, the \texttt{FlatLambdaCDM} class represents a flat
cosmology with a cosmological constant. To create an object
representing a flat cosmology \texttt{cosmo} with a Hubble parameter
$H_{z=0} = 70$~km\,s$^{-1}$\,Mpc and $\Omega_{M,z=0} = 0.3$, one would
use:

\begin{verbatim}
>>> from astropy.cosmology import FlatLambdaCDM
>>> cosmo = FlatLambdaCDM(H0=70, Om0=0.3)
\end{verbatim}

\noindent Then the comoving volume (for example) can be calculated at
redshift $6.5$ using the \texttt{comoving\_volume} method:

\begin{verbatim}
>>> cosmo.comoving_volume(6.5)
1074707289417.6837
\end{verbatim}

\noindent Further calculations can be performed using the many methods
of \texttt{cosmo}, such as \texttt{cosmo.lookback\_time} and
\texttt{cosmo.comoving\_distance}.  For users who are more comfortable
using a procedural coding style, these methods are also available as
functions that take a cosmology class instance as a keyword argument.

The sub-package provides several pre-defined cosmology instances
corresponding to commonly used cosmological parameter sets. Currently
parameters from the WMAP 5-year \citep{Komatsu09}, 7-year
\citep{Komatsu11} and 9-year results \citep{Hinshaw13} are included
(\texttt{WMAP5}, \texttt{WMAP7} and \texttt{WMAP9}). There are several
classes corresponding to non-flat cosmologies, and the most common
dark energy models are supported: a cosmological constant, constant
$w$, and $w(a) = w_0 + w_a (1-a)$ (e.g. \citealt{Linder03}, here $a$
is the scale factor). Any other arbitrary cosmology can be represented
by sub-classing one of the basic cosmology classes.

All of the code in the sub-package is tested against the web-based
cosmology calculator by \citet{Wright06} and two other widely-used
calculators\footnote{\url{http://www.kempner.net/cosmic.php},\\ \url{http://www.icosmos.co.uk/index.html}}.
In cases when these calculators are not precise enough to enable a
meaningful comparison, the code is tested against calculations
performed with \textsc{Mathematica}.

\section{Development workflow}

\label{sec:workflow}

% Describe tools used in the development process, and how development is managed (not specifically how we use git, but higher-level.

% Authors: Tom R., Erik T., Perry G.


\section{Planned functionality}

\label{sec:future}

% Authors: Tom R., Erik T., Perry G.


\section{Summary}

\label{sec:summary}

% Authors: Tom R., Erik T., Perry G.

\bibliographystyle{apj_custom}
\bibliography{apj-jour,references}

\end{document}
